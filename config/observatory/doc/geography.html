<PageTemplate bgurl="mountains.jpg">
    <BreadCrumb a="pf" b="geography" />
    <CardStack>
        <Card>
            <CardContent>
                <Typography type="headline">
                    Malaria across the world
                </Typography>
                <Typography type="subheading" color="secondary">
                    Identifying sub-populations of parasites is important for malaria control
                </Typography>
                <Typography component="p">
                    <em>Plasmodium falciparum</em> malaria is found across the tropics in the Americas, Africa, and Asia.
                </Typography>
                <Typography component="p">
                    We analyse the genomes of parasites from across these continents to understand how they are related to each other. Grouping parasites in this way allows us to see how samples from across the world are connected to each other.
                </Typography>
                <Typography component="p">
                    Understanding the connectedness of populations helps us to figure out routes of parasite <strong>transmission</strong>, where <strong>new infections</strong> have come from, and how drug resistance mutations might <strong>spread</strong>.
                </Typography>
                <Typography component="p">
                    In the Malaria Observatory, we define regions using a combination of genetic relatedness and geographic proximity. For more information, check out our detailed metholodogy here.
                </Typography>
                <Typography component="p">
                    The <strong><QueryResult table="pf_samples"/> </strong> <em>P. falciparum</em> samples are divided into <strong> <QueryResult table="pf_regions"/></strong> regions of the world, each of which has a distinctive sub-population of parasites.
                </Typography>
                <Typography component="p">
                    <em> Choose a region or click on the map below to view data from a region.</em><SelectRow table="pf_regions"/>
                </Typography>

                <div style="height:300px">
                    <Map disableInteraction>
                        <TileLayer url="http://{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}.png" variant="light_nolabels" />
                        <TableGeoJSONsLayer table="pf_regions" geoJsonProperty="geojson" colourProperty="web_colour" labelProperty="name" showLegend="false"/>
                        <TableMarkersLayer disableOnClickMarker table="sites" clusterMarkers="false">
                            <svg style="overflow: visible; width: 73px; height: 73px" viewBox="0 0 42 42"> <circle cx="0" cy="0" r=".5" strokeWidth="0" stroke="purple" fill="black" opacity="0.8"/> </svg>
                        </TableMarkersLayer>
                    </Map>
                </div>
            </CardContent>
        </Card>

        <!--<Card >
            <CardTitle title="Countries" subtitle="" />

            <CardText>
                The Malaria Observatory has genomic data on parasites from <strong>
                <QueryResult table="countries"/>
            </strong> countries. Choose a country below to understand more about malaria parasites and sampling sites
                from a particular country.
                <p>
                    <SelectRow table="countries"/>
                </p>
            </CardText>
        </Card>
        <Card>
            <CardTitle title="Sampling sites" />
            <CardText>
                <p>The Malaria Observatory contains <strong>
                    <QueryResult table="pf_samples"/>
                </strong> <em>P. falciparum</em> samples from <strong>60</strong> study sites. Click on a site below to
                    view data from a study site.
                </p>
                <div style="height:300px">
                    <Map disableInteraction>
                        <TileLayer/>
                        <TableGeoJSONsLayer table="pf_regions" geoJsonProperty="geojson" colourProperty="web_colour"
                                            labelProperty="name" showLegend="false"/>
                        <TableMarkersLayer table="sites" clusterMarkers="false">
                            <svg style="overflow: visible; width: 73px; height: 73px" viewBox="0 0 42 42">
                                <circle cx="0" cy="0" r="1" strokeWidth="0" stroke="purple" fill="black" opacity="0.5"/>
                            </svg>
                        </TableMarkersLayer>
                    </Map>
                </div>
                <PopupButton icon="arrow-right" label="View map" target="tab">
                    <ComponentWithLegend table="variants" columns='["Position", "SNPEFF_AMINO_ACID_CHANGE", "AF_WAF", "AF_CAF","AF_EAF", "AF_WSEA", "AF_ESEA", "AF_SAS",  "AF_SAM", "AF_OCE" ]' order='[["desc", "SNPEFF_AMINO_ACID_CHANGE" ]]' query='{"whcClass":"compound","isCompound":true,"isRoot":true,"Components":[{"whcClass":"comparefixed","isCompound":false,"ColName":"CHROM","CompValue":"{{chromid}}","Tpe":"="},{"whcClass":"comparefixed","isCompound":false,"ColName":"POS","CompValue":{{fstart}},"Tpe":">="},{"whcClass":"comparefixed","isCompound":false,"ColName":"POS","CompValue":{{fstop}},"Tpe":"<="},{"whcClass":"comparefixed","isCompound":false,"ColName":"FILTER_PASS","CompValue":true,"Tpe":"="}],"Tpe":"AND"}'>
                        <div>Legend here</div>
                        <Map>
                            <TileLayer/>
                            <TableGeoJSONsLayer table="pf_regions" geoJsonProperty="geojson" colourProperty="web_colour"
                                                labelProperty="name"/>
                            <TableMarkersLayer table="sites" clusterMarkers="false">
                                <svg style="overflow: visible; width: 73px; height: 73px" viewBox="0 0 42 42">
                                    <circle cx="0" cy="0" r="1" strokeWidth="0" stroke="purple" fill="black" opacity="0.5"/>
                                </svg>
                            </TableMarkersLayer>
                        </Map>
                    </ComponentWithLegend>
                </PopupButton>
            </CardText>
        </Card>-->
    </CardStack>


